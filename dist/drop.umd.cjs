(function(dt,ft){typeof exports=="object"&&typeof module<"u"?ft(exports):typeof define=="function"&&define.amd?define(["exports"],ft):(dt=typeof globalThis<"u"?globalThis:dt||self,ft(dt.Drop={}))})(this,(function(dt){"use strict";const ft={PaymentInitiated:"initiated",PaymentPending:"pending",PaymentSucceeded:"succeeded",PaymentFailed:"failed",PaymentCancelled:"cancelled",PaymentExpired:"expired"},Rt=new Set(["succeeded","failed","cancelled","expired"]);function Bt(c){return ft[c]??null}function Pt(c){return Rt.has(c)}function pt(c,A,z){return{code:c,message:A,retryable:z}}function mt(c,A){switch(c){case 401:return pt("AUTH_ERROR",A??"Invalid client secret.",!1);case 404:return pt("NOT_FOUND",A??"Payment intent not found.",!1);case 429:return pt("RATE_LIMITED",A??"Rate limited. Retrying.",!0);default:return pt("UNKNOWN",A??`Unexpected status: ${c}`,!0)}}function Mt(c){return pt("NETWORK_ERROR",c,!0)}const Ot=3e3,zt=1.5,Nt=3e4,$t=5,Tt=3e4;class qt{constructor(A){this.interval=Ot,this.timer=null,this.destroyed=!1,this.consecutiveFailures=0,this.currentStatus="initiated",this.expiresAt=null,this.config=A,A.pollingInterval&&(this.interval=A.pollingInterval)}start(){this.poll()}stop(){this.destroyed=!0,this.timer!==null&&(clearTimeout(this.timer),this.timer=null)}getStatus(){return this.currentStatus}async poll(){var A,z;if(!this.destroyed){if((z=(A=this.config).onPoll)==null||z.call(A),this.isExpired()){this.emitStatus("expired");return}try{const R=await this.fetchStatus();if(R.ok){this.consecutiveFailures=0,this.interval=Ot;const k=await R.json();this.expiresAt=new Date(k.expiresAt);const Q=Bt(k.status);if(Q&&Q!==this.currentStatus&&(this.emitStatus(Q),Pt(Q)))return}else if(R.status===429){const k=R.headers.get("Retry-After");if(k){const Q=parseInt(k,10);isNaN(Q)||(this.interval=Q*1e3)}else this.applyBackoff();this.config.onError(mt(429))}else if(R.status===401||R.status===404){this.config.onError(mt(R.status));return}else if(this.consecutiveFailures++,this.applyBackoff(),this.config.onError(mt(R.status)),this.consecutiveFailures>=$t){this.config.onError(mt(R.status,"Max consecutive failures reached. Stopping."));return}}catch{if(this.consecutiveFailures++,this.applyBackoff(),this.config.onError(Mt("Network request failed.")),this.consecutiveFailures>=$t){this.config.onError(Mt("Max consecutive failures reached. Stopping."));return}}this.scheduleNext()}}async fetchStatus(){const A=this.config.queryString||"",z=`${this.config.apiBaseUrl}/payment-accounts/${this.config.paymentAccountId}/payment-intents/${this.config.paymentIntentId}/status${A}`;return fetch(z,{method:"GET",headers:{"client-secret":this.config.clientSecret}})}emitStatus(A){this.currentStatus=A,this.config.onStatusChange(A)}applyBackoff(){this.interval=Math.min(this.interval*zt,Nt)}isExpired(){return this.expiresAt?Date.now()>this.expiresAt.getTime()+Tt:!1}scheduleNext(){this.destroyed||(this.timer=setTimeout(()=>this.poll(),this.interval))}}function Lt(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var vt={exports:{}},jt=vt.exports,Et;function Ft(){return Et||(Et=1,(function(c,A){(function(z,R){c.exports=R()})(jt,(()=>(()=>{var z={873:(S,C)=>{var D,F,N=(function(){var U=function(f,l){var d=f,e=st[l],t=null,n=0,r=null,i=[],a={},w=function(o,h){t=(function(s){for(var u=new Array(s),g=0;g<s;g+=1){u[g]=new Array(s);for(var b=0;b<s;b+=1)u[g][b]=null}return u})(n=4*d+17),p(0,0),p(n-7,0),p(0,n-7),m(),_(),v(o,h),d>=7&&y(o),r==null&&(r=B(d,e,i)),x(r,h)},p=function(o,h){for(var s=-1;s<=7;s+=1)if(!(o+s<=-1||n<=o+s))for(var u=-1;u<=7;u+=1)h+u<=-1||n<=h+u||(t[o+s][h+u]=0<=s&&s<=6&&(u==0||u==6)||0<=u&&u<=6&&(s==0||s==6)||2<=s&&s<=4&&2<=u&&u<=4)},_=function(){for(var o=8;o<n-8;o+=1)t[o][6]==null&&(t[o][6]=o%2==0);for(var h=8;h<n-8;h+=1)t[6][h]==null&&(t[6][h]=h%2==0)},m=function(){for(var o=Y.getPatternPosition(d),h=0;h<o.length;h+=1)for(var s=0;s<o.length;s+=1){var u=o[h],g=o[s];if(t[u][g]==null)for(var b=-2;b<=2;b+=1)for(var $=-2;$<=2;$+=1)t[u+b][g+$]=b==-2||b==2||$==-2||$==2||b==0&&$==0}},y=function(o){for(var h=Y.getBCHTypeNumber(d),s=0;s<18;s+=1){var u=!o&&(h>>s&1)==1;t[Math.floor(s/3)][s%3+n-8-3]=u}for(s=0;s<18;s+=1)u=!o&&(h>>s&1)==1,t[s%3+n-8-3][Math.floor(s/3)]=u},v=function(o,h){for(var s=e<<3|h,u=Y.getBCHTypeInfo(s),g=0;g<15;g+=1){var b=!o&&(u>>g&1)==1;g<6?t[g][8]=b:g<8?t[g+1][8]=b:t[n-15+g][8]=b}for(g=0;g<15;g+=1)b=!o&&(u>>g&1)==1,g<8?t[8][n-g-1]=b:g<9?t[8][15-g-1+1]=b:t[8][15-g-1]=b;t[n-8][8]=!o},x=function(o,h){for(var s=-1,u=n-1,g=7,b=0,$=Y.getMaskFunction(h),I=n-1;I>0;I-=2)for(I==6&&(I-=1);;){for(var q=0;q<2;q+=1)if(t[u][I-q]==null){var L=!1;b<o.length&&(L=(o[b]>>>g&1)==1),$(u,I-q)&&(L=!L),t[u][I-q]=L,(g-=1)==-1&&(b+=1,g=7)}if((u+=s)<0||n<=u){u-=s,s=-s;break}}},B=function(o,h,s){for(var u=_t.getRSBlocks(o,h),g=ct(),b=0;b<s.length;b+=1){var $=s[b];g.put($.getMode(),4),g.put($.getLength(),Y.getLengthInBits($.getMode(),o)),$.write(g)}var I=0;for(b=0;b<u.length;b+=1)I+=u[b].dataCount;if(g.getLengthInBits()>8*I)throw"code length overflow. ("+g.getLengthInBits()+">"+8*I+")";for(g.getLengthInBits()+4<=8*I&&g.put(0,4);g.getLengthInBits()%8!=0;)g.putBit(!1);for(;!(g.getLengthInBits()>=8*I||(g.put(236,8),g.getLengthInBits()>=8*I));)g.put(17,8);return(function(q,L){for(var H=0,et=0,V=0,W=new Array(L.length),j=new Array(L.length),M=0;M<L.length;M+=1){var K=L[M].dataCount,J=L[M].totalCount-K;et=Math.max(et,K),V=Math.max(V,J),W[M]=new Array(K);for(var E=0;E<W[M].length;E+=1)W[M][E]=255&q.getBuffer()[E+H];H+=K;var ot=Y.getErrorCorrectPolynomial(J),rt=ht(W[M],ot.getLength()-1).mod(ot);for(j[M]=new Array(ot.getLength()-1),E=0;E<j[M].length;E+=1){var it=E+rt.getLength()-j[M].length;j[M][E]=it>=0?rt.getAt(it):0}}var St=0;for(E=0;E<L.length;E+=1)St+=L[E].totalCount;var wt=new Array(St),at=0;for(E=0;E<et;E+=1)for(M=0;M<L.length;M+=1)E<W[M].length&&(wt[at]=W[M][E],at+=1);for(E=0;E<V;E+=1)for(M=0;M<L.length;M+=1)E<j[M].length&&(wt[at]=j[M][E],at+=1);return wt})(g,u)};a.addData=function(o,h){var s=null;switch(h=h||"Byte"){case"Numeric":s=yt(o);break;case"Alphanumeric":s=bt(o);break;case"Byte":s=lt(o);break;case"Kanji":s=Ct(o);break;default:throw"mode:"+h}i.push(s),r=null},a.isDark=function(o,h){if(o<0||n<=o||h<0||n<=h)throw o+","+h;return t[o][h]},a.getModuleCount=function(){return n},a.make=function(){if(d<1){for(var o=1;o<40;o++){for(var h=_t.getRSBlocks(o,e),s=ct(),u=0;u<i.length;u++){var g=i[u];s.put(g.getMode(),4),s.put(g.getLength(),Y.getLengthInBits(g.getMode(),o)),g.write(s)}var b=0;for(u=0;u<h.length;u++)b+=h[u].dataCount;if(s.getLengthInBits()<=8*b)break}d=o}w(!1,(function(){for(var $=0,I=0,q=0;q<8;q+=1){w(!0,q);var L=Y.getLostPoint(a);(q==0||$>L)&&($=L,I=q)}return I})())},a.createTableTag=function(o,h){o=o||2;var s="";s+='<table style="',s+=" border-width: 0px; border-style: none;",s+=" border-collapse: collapse;",s+=" padding: 0px; margin: "+(h=h===void 0?4*o:h)+"px;",s+='">',s+="<tbody>";for(var u=0;u<a.getModuleCount();u+=1){s+="<tr>";for(var g=0;g<a.getModuleCount();g+=1)s+='<td style="',s+=" border-width: 0px; border-style: none;",s+=" border-collapse: collapse;",s+=" padding: 0px; margin: 0px;",s+=" width: "+o+"px;",s+=" height: "+o+"px;",s+=" background-color: ",s+=a.isDark(u,g)?"#000000":"#ffffff",s+=";",s+='"/>';s+="</tr>"}return(s+="</tbody>")+"</table>"},a.createSvgTag=function(o,h,s,u){var g={};typeof arguments[0]=="object"&&(o=(g=arguments[0]).cellSize,h=g.margin,s=g.alt,u=g.title),o=o||2,h=h===void 0?4*o:h,(s=typeof s=="string"?{text:s}:s||{}).text=s.text||null,s.id=s.text?s.id||"qrcode-description":null,(u=typeof u=="string"?{text:u}:u||{}).text=u.text||null,u.id=u.text?u.id||"qrcode-title":null;var b,$,I,q,L=a.getModuleCount()*o+2*h,H="";for(q="l"+o+",0 0,"+o+" -"+o+",0 0,-"+o+"z ",H+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',H+=g.scalable?"":' width="'+L+'px" height="'+L+'px"',H+=' viewBox="0 0 '+L+" "+L+'" ',H+=' preserveAspectRatio="xMinYMin meet"',H+=u.text||s.text?' role="img" aria-labelledby="'+O([u.id,s.id].join(" ").trim())+'"':"",H+=">",H+=u.text?'<title id="'+O(u.id)+'">'+O(u.text)+"</title>":"",H+=s.text?'<description id="'+O(s.id)+'">'+O(s.text)+"</description>":"",H+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',H+='<path d="',$=0;$<a.getModuleCount();$+=1)for(I=$*o+h,b=0;b<a.getModuleCount();b+=1)a.isDark($,b)&&(H+="M"+(b*o+h)+","+I+q);return(H+='" stroke="transparent" fill="black"/>')+"</svg>"},a.createDataURL=function(o,h){o=o||2,h=h===void 0?4*o:h;var s=a.getModuleCount()*o+2*h,u=h,g=s-h;return gt(s,s,(function(b,$){if(u<=b&&b<g&&u<=$&&$<g){var I=Math.floor((b-u)/o),q=Math.floor(($-u)/o);return a.isDark(q,I)?0:1}return 1}))},a.createImgTag=function(o,h,s){o=o||2,h=h===void 0?4*o:h;var u=a.getModuleCount()*o+2*h,g="";return g+="<img",g+=' src="',g+=a.createDataURL(o,h),g+='"',g+=' width="',g+=u,g+='"',g+=' height="',g+=u,g+='"',s&&(g+=' alt="',g+=O(s),g+='"'),g+"/>"};var O=function(o){for(var h="",s=0;s<o.length;s+=1){var u=o.charAt(s);switch(u){case"<":h+="&lt;";break;case">":h+="&gt;";break;case"&":h+="&amp;";break;case'"':h+="&quot;";break;default:h+=u}}return h};return a.createASCII=function(o,h){if((o=o||1)<2)return(function(W){W=W===void 0?2:W;var j,M,K,J,E,ot=1*a.getModuleCount()+2*W,rt=W,it=ot-W,St={"██":"█","█ ":"▀"," █":"▄","  ":" "},wt={"██":"▀","█ ":"▀"," █":" ","  ":" "},at="";for(j=0;j<ot;j+=2){for(K=Math.floor((j-rt)/1),J=Math.floor((j+1-rt)/1),M=0;M<ot;M+=1)E="█",rt<=M&&M<it&&rt<=j&&j<it&&a.isDark(K,Math.floor((M-rt)/1))&&(E=" "),rt<=M&&M<it&&rt<=j+1&&j+1<it&&a.isDark(J,Math.floor((M-rt)/1))?E+=" ":E+="█",at+=W<1&&j+1>=it?wt[E]:St[E];at+=`
`}return ot%2&&W>0?at.substring(0,at.length-ot-1)+Array(ot+1).join("▀"):at.substring(0,at.length-1)})(h);o-=1,h=h===void 0?2*o:h;var s,u,g,b,$=a.getModuleCount()*o+2*h,I=h,q=$-h,L=Array(o+1).join("██"),H=Array(o+1).join("  "),et="",V="";for(s=0;s<$;s+=1){for(g=Math.floor((s-I)/o),V="",u=0;u<$;u+=1)b=1,I<=u&&u<q&&I<=s&&s<q&&a.isDark(g,Math.floor((u-I)/o))&&(b=0),V+=b?L:H;for(g=0;g<o;g+=1)et+=V+`
`}return et.substring(0,et.length-1)},a.renderTo2dContext=function(o,h){h=h||2;for(var s=a.getModuleCount(),u=0;u<s;u++)for(var g=0;g<s;g++)o.fillStyle=a.isDark(u,g)?"black":"white",o.fillRect(u*h,g*h,h,h)},a};U.stringToBytes=(U.stringToBytesFuncs={default:function(f){for(var l=[],d=0;d<f.length;d+=1){var e=f.charCodeAt(d);l.push(255&e)}return l}}).default,U.createStringToBytes=function(f,l){var d=(function(){for(var t=At(f),n=function(){var _=t.read();if(_==-1)throw"eof";return _},r=0,i={};;){var a=t.read();if(a==-1)break;var w=n(),p=n()<<8|n();i[String.fromCharCode(a<<8|w)]=p,r+=1}if(r!=l)throw r+" != "+l;return i})(),e=63;return function(t){for(var n=[],r=0;r<t.length;r+=1){var i=t.charCodeAt(r);if(i<128)n.push(i);else{var a=d[t.charAt(r)];typeof a=="number"?(255&a)==a?n.push(a):(n.push(a>>>8),n.push(255&a)):n.push(e)}}return n}};var Z,X,T,P,nt,st={L:1,M:0,Q:3,H:2},Y=(Z=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],X=1335,T=7973,nt=function(f){for(var l=0;f!=0;)l+=1,f>>>=1;return l},(P={}).getBCHTypeInfo=function(f){for(var l=f<<10;nt(l)-nt(X)>=0;)l^=X<<nt(l)-nt(X);return 21522^(f<<10|l)},P.getBCHTypeNumber=function(f){for(var l=f<<12;nt(l)-nt(T)>=0;)l^=T<<nt(l)-nt(T);return f<<12|l},P.getPatternPosition=function(f){return Z[f-1]},P.getMaskFunction=function(f){switch(f){case 0:return function(l,d){return(l+d)%2==0};case 1:return function(l,d){return l%2==0};case 2:return function(l,d){return d%3==0};case 3:return function(l,d){return(l+d)%3==0};case 4:return function(l,d){return(Math.floor(l/2)+Math.floor(d/3))%2==0};case 5:return function(l,d){return l*d%2+l*d%3==0};case 6:return function(l,d){return(l*d%2+l*d%3)%2==0};case 7:return function(l,d){return(l*d%3+(l+d)%2)%2==0};default:throw"bad maskPattern:"+f}},P.getErrorCorrectPolynomial=function(f){for(var l=ht([1],0),d=0;d<f;d+=1)l=l.multiply(ht([1,G.gexp(d)],0));return l},P.getLengthInBits=function(f,l){if(1<=l&&l<10)switch(f){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+f}else if(l<27)switch(f){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+f}else{if(!(l<41))throw"type:"+l;switch(f){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+f}}},P.getLostPoint=function(f){for(var l=f.getModuleCount(),d=0,e=0;e<l;e+=1)for(var t=0;t<l;t+=1){for(var n=0,r=f.isDark(e,t),i=-1;i<=1;i+=1)if(!(e+i<0||l<=e+i))for(var a=-1;a<=1;a+=1)t+a<0||l<=t+a||i==0&&a==0||r==f.isDark(e+i,t+a)&&(n+=1);n>5&&(d+=3+n-5)}for(e=0;e<l-1;e+=1)for(t=0;t<l-1;t+=1){var w=0;f.isDark(e,t)&&(w+=1),f.isDark(e+1,t)&&(w+=1),f.isDark(e,t+1)&&(w+=1),f.isDark(e+1,t+1)&&(w+=1),w!=0&&w!=4||(d+=3)}for(e=0;e<l;e+=1)for(t=0;t<l-6;t+=1)f.isDark(e,t)&&!f.isDark(e,t+1)&&f.isDark(e,t+2)&&f.isDark(e,t+3)&&f.isDark(e,t+4)&&!f.isDark(e,t+5)&&f.isDark(e,t+6)&&(d+=40);for(t=0;t<l;t+=1)for(e=0;e<l-6;e+=1)f.isDark(e,t)&&!f.isDark(e+1,t)&&f.isDark(e+2,t)&&f.isDark(e+3,t)&&f.isDark(e+4,t)&&!f.isDark(e+5,t)&&f.isDark(e+6,t)&&(d+=40);var p=0;for(t=0;t<l;t+=1)for(e=0;e<l;e+=1)f.isDark(e,t)&&(p+=1);return d+Math.abs(100*p/l/l-50)/5*10},P),G=(function(){for(var f=new Array(256),l=new Array(256),d=0;d<8;d+=1)f[d]=1<<d;for(d=8;d<256;d+=1)f[d]=f[d-4]^f[d-5]^f[d-6]^f[d-8];for(d=0;d<255;d+=1)l[f[d]]=d;return{glog:function(e){if(e<1)throw"glog("+e+")";return l[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return f[e]}}})();function ht(f,l){if(f.length===void 0)throw f.length+"/"+l;var d=(function(){for(var t=0;t<f.length&&f[t]==0;)t+=1;for(var n=new Array(f.length-t+l),r=0;r<f.length-t;r+=1)n[r]=f[r+t];return n})(),e={getAt:function(t){return d[t]},getLength:function(){return d.length},multiply:function(t){for(var n=new Array(e.getLength()+t.getLength()-1),r=0;r<e.getLength();r+=1)for(var i=0;i<t.getLength();i+=1)n[r+i]^=G.gexp(G.glog(e.getAt(r))+G.glog(t.getAt(i)));return ht(n,0)},mod:function(t){if(e.getLength()-t.getLength()<0)return e;for(var n=G.glog(e.getAt(0))-G.glog(t.getAt(0)),r=new Array(e.getLength()),i=0;i<e.getLength();i+=1)r[i]=e.getAt(i);for(i=0;i<t.getLength();i+=1)r[i]^=G.gexp(G.glog(t.getAt(i))+n);return ht(r,0).mod(t)}};return e}var _t=(function(){var f=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],l=function(e,t){var n={};return n.totalCount=e,n.dataCount=t,n},d={getRSBlocks:function(e,t){var n=(function(y,v){switch(v){case st.L:return f[4*(y-1)+0];case st.M:return f[4*(y-1)+1];case st.Q:return f[4*(y-1)+2];case st.H:return f[4*(y-1)+3];default:return}})(e,t);if(n===void 0)throw"bad rs block @ typeNumber:"+e+"/errorCorrectionLevel:"+t;for(var r=n.length/3,i=[],a=0;a<r;a+=1)for(var w=n[3*a+0],p=n[3*a+1],_=n[3*a+2],m=0;m<w;m+=1)i.push(l(p,_));return i}};return d})(),ct=function(){var f=[],l=0,d={getBuffer:function(){return f},getAt:function(e){var t=Math.floor(e/8);return(f[t]>>>7-e%8&1)==1},put:function(e,t){for(var n=0;n<t;n+=1)d.putBit((e>>>t-n-1&1)==1)},getLengthInBits:function(){return l},putBit:function(e){var t=Math.floor(l/8);f.length<=t&&f.push(0),e&&(f[t]|=128>>>l%8),l+=1}};return d},yt=function(f){var l=f,d={getMode:function(){return 1},getLength:function(n){return l.length},write:function(n){for(var r=l,i=0;i+2<r.length;)n.put(e(r.substring(i,i+3)),10),i+=3;i<r.length&&(r.length-i==1?n.put(e(r.substring(i,i+1)),4):r.length-i==2&&n.put(e(r.substring(i,i+2)),7))}},e=function(n){for(var r=0,i=0;i<n.length;i+=1)r=10*r+t(n.charAt(i));return r},t=function(n){if("0"<=n&&n<="9")return n.charCodeAt(0)-48;throw"illegal char :"+n};return d},bt=function(f){var l=f,d={getMode:function(){return 2},getLength:function(t){return l.length},write:function(t){for(var n=l,r=0;r+1<n.length;)t.put(45*e(n.charAt(r))+e(n.charAt(r+1)),11),r+=2;r<n.length&&t.put(e(n.charAt(r)),6)}},e=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-48;if("A"<=t&&t<="Z")return t.charCodeAt(0)-65+10;switch(t){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+t}};return d},lt=function(f){var l=U.stringToBytes(f);return{getMode:function(){return 4},getLength:function(d){return l.length},write:function(d){for(var e=0;e<l.length;e+=1)d.put(l[e],8)}}},Ct=function(f){var l=U.stringToBytesFuncs.SJIS;if(!l)throw"sjis not supported.";(function(){var t=l("友");if(t.length!=2||(t[0]<<8|t[1])!=38726)throw"sjis not supported."})();var d=l(f),e={getMode:function(){return 8},getLength:function(t){return~~(d.length/2)},write:function(t){for(var n=d,r=0;r+1<n.length;){var i=(255&n[r])<<8|255&n[r+1];if(33088<=i&&i<=40956)i-=33088;else{if(!(57408<=i&&i<=60351))throw"illegal char at "+(r+1)+"/"+i;i-=49472}i=192*(i>>>8&255)+(255&i),t.put(i,13),r+=2}if(r<n.length)throw"illegal char at "+(r+1)}};return e},xt=function(){var f=[],l={writeByte:function(d){f.push(255&d)},writeShort:function(d){l.writeByte(d),l.writeByte(d>>>8)},writeBytes:function(d,e,t){e=e||0,t=t||d.length;for(var n=0;n<t;n+=1)l.writeByte(d[n+e])},writeString:function(d){for(var e=0;e<d.length;e+=1)l.writeByte(d.charCodeAt(e))},toByteArray:function(){return f},toString:function(){var d="";d+="[";for(var e=0;e<f.length;e+=1)e>0&&(d+=","),d+=f[e];return d+"]"}};return l},At=function(f){var l=f,d=0,e=0,t=0,n={read:function(){for(;t<8;){if(d>=l.length){if(t==0)return-1;throw"unexpected end of file./"+t}var i=l.charAt(d);if(d+=1,i=="=")return t=0,-1;i.match(/^\s$/)||(e=e<<6|r(i.charCodeAt(0)),t+=6)}var a=e>>>t-8&255;return t-=8,a}},r=function(i){if(65<=i&&i<=90)return i-65;if(97<=i&&i<=122)return i-97+26;if(48<=i&&i<=57)return i-48+52;if(i==43)return 62;if(i==47)return 63;throw"c:"+i};return n},gt=function(f,l,d){for(var e=(function(p,_){var m=p,y=_,v=new Array(p*_),x={setPixel:function(o,h,s){v[h*m+o]=s},write:function(o){o.writeString("GIF87a"),o.writeShort(m),o.writeShort(y),o.writeByte(128),o.writeByte(0),o.writeByte(0),o.writeByte(0),o.writeByte(0),o.writeByte(0),o.writeByte(255),o.writeByte(255),o.writeByte(255),o.writeString(","),o.writeShort(0),o.writeShort(0),o.writeShort(m),o.writeShort(y),o.writeByte(0);var h=B(2);o.writeByte(2);for(var s=0;h.length-s>255;)o.writeByte(255),o.writeBytes(h,s,255),s+=255;o.writeByte(h.length-s),o.writeBytes(h,s,h.length-s),o.writeByte(0),o.writeString(";")}},B=function(o){for(var h=1<<o,s=1+(1<<o),u=o+1,g=O(),b=0;b<h;b+=1)g.add(String.fromCharCode(b));g.add(String.fromCharCode(h)),g.add(String.fromCharCode(s));var $,I,q,L=xt(),H=($=L,I=0,q=0,{write:function(j,M){if(j>>>M)throw"length over";for(;I+M>=8;)$.writeByte(255&(j<<I|q)),M-=8-I,j>>>=8-I,q=0,I=0;q|=j<<I,I+=M},flush:function(){I>0&&$.writeByte(q)}});H.write(h,u);var et=0,V=String.fromCharCode(v[et]);for(et+=1;et<v.length;){var W=String.fromCharCode(v[et]);et+=1,g.contains(V+W)?V+=W:(H.write(g.indexOf(V),u),g.size()<4095&&(g.size()==1<<u&&(u+=1),g.add(V+W)),V=W)}return H.write(g.indexOf(V),u),H.write(s,u),H.flush(),L.toByteArray()},O=function(){var o={},h=0,s={add:function(u){if(s.contains(u))throw"dup key:"+u;o[u]=h,h+=1},size:function(){return h},indexOf:function(u){return o[u]},contains:function(u){return o[u]!==void 0}};return s};return x})(f,l),t=0;t<l;t+=1)for(var n=0;n<f;n+=1)e.setPixel(n,t,d(n,t));var r=xt();e.write(r);for(var i=(function(){var p=0,_=0,m=0,y="",v={},x=function(O){y+=String.fromCharCode(B(63&O))},B=function(O){if(!(O<0)){if(O<26)return 65+O;if(O<52)return O-26+97;if(O<62)return O-52+48;if(O==62)return 43;if(O==63)return 47}throw"n:"+O};return v.writeByte=function(O){for(p=p<<8|255&O,_+=8,m+=1;_>=6;)x(p>>>_-6),_-=6},v.flush=function(){if(_>0&&(x(p<<6-_),p=0,_=0),m%3!=0)for(var O=3-m%3,o=0;o<O;o+=1)y+="="},v.toString=function(){return y},v})(),a=r.toByteArray(),w=0;w<a.length;w+=1)i.writeByte(a[w]);return i.flush(),"data:image/gif;base64,"+i};return U})();N.stringToBytesFuncs["UTF-8"]=function(U){return(function(Z){for(var X=[],T=0;T<Z.length;T++){var P=Z.charCodeAt(T);P<128?X.push(P):P<2048?X.push(192|P>>6,128|63&P):P<55296||P>=57344?X.push(224|P>>12,128|P>>6&63,128|63&P):(T++,P=65536+((1023&P)<<10|1023&Z.charCodeAt(T)),X.push(240|P>>18,128|P>>12&63,128|P>>6&63,128|63&P))}return X})(U)},(F=typeof(D=function(){return N})=="function"?D.apply(C,[]):D)===void 0||(S.exports=F)}},R={};function k(S){var C=R[S];if(C!==void 0)return C.exports;var D=R[S]={exports:{}};return z[S](D,D.exports,k),D.exports}k.n=S=>{var C=S&&S.__esModule?()=>S.default:()=>S;return k.d(C,{a:C}),C},k.d=(S,C)=>{for(var D in C)k.o(C,D)&&!k.o(S,D)&&Object.defineProperty(S,D,{enumerable:!0,get:C[D]})},k.o=(S,C)=>Object.prototype.hasOwnProperty.call(S,C);var Q={};return(()=>{k.d(Q,{default:()=>l});const S=d=>!!d&&typeof d=="object"&&!Array.isArray(d);function C(d,...e){if(!e.length)return d;const t=e.shift();return t!==void 0&&S(d)&&S(t)?(d=Object.assign({},d),Object.keys(t).forEach((n=>{const r=d[n],i=t[n];Array.isArray(r)&&Array.isArray(i)?d[n]=i:S(r)&&S(i)?d[n]=C(Object.assign({},r),i):d[n]=i})),C(d,...e)):d}function D(d,e){const t=document.createElement("a");t.download=e,t.href=d,document.body.appendChild(t),t.click(),document.body.removeChild(t)}const F={L:.07,M:.15,Q:.25,H:.3};class N{constructor({svg:e,type:t,window:n}){this._svg=e,this._type=t,this._window=n}draw(e,t,n,r){let i;switch(this._type){case"dots":i=this._drawDot;break;case"classy":i=this._drawClassy;break;case"classy-rounded":i=this._drawClassyRounded;break;case"rounded":i=this._drawRounded;break;case"extra-rounded":i=this._drawExtraRounded;break;default:i=this._drawSquare}i.call(this,{x:e,y:t,size:n,getNeighbor:r})}_rotateFigure({x:e,y:t,size:n,rotation:r=0,draw:i}){var a;const w=e+n/2,p=t+n/2;i(),(a=this._element)===null||a===void 0||a.setAttribute("transform",`rotate(${180*r/Math.PI},${w},${p})`)}_basicDot(e){const{size:t,x:n,y:r}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",String(n+t/2)),this._element.setAttribute("cy",String(r+t/2)),this._element.setAttribute("r",String(t/2))}}))}_basicSquare(e){const{size:t,x:n,y:r}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",String(n)),this._element.setAttribute("y",String(r)),this._element.setAttribute("width",String(t)),this._element.setAttribute("height",String(t))}}))}_basicSideRounded(e){const{size:t,x:n,y:r}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${n} ${r}v ${t}h `+t/2+`a ${t/2} ${t/2}, 0, 0, 0, 0 ${-t}`)}}))}_basicCornerRounded(e){const{size:t,x:n,y:r}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${n} ${r}v ${t}h ${t}v `+-t/2+`a ${t/2} ${t/2}, 0, 0, 0, ${-t/2} ${-t/2}`)}}))}_basicCornerExtraRounded(e){const{size:t,x:n,y:r}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${n} ${r}v ${t}h ${t}a ${t} ${t}, 0, 0, 0, ${-t} ${-t}`)}}))}_basicCornersRounded(e){const{size:t,x:n,y:r}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${n} ${r}v `+t/2+`a ${t/2} ${t/2}, 0, 0, 0, ${t/2} ${t/2}h `+t/2+"v "+-t/2+`a ${t/2} ${t/2}, 0, 0, 0, ${-t/2} ${-t/2}`)}}))}_drawDot({x:e,y:t,size:n}){this._basicDot({x:e,y:t,size:n,rotation:0})}_drawSquare({x:e,y:t,size:n}){this._basicSquare({x:e,y:t,size:n,rotation:0})}_drawRounded({x:e,y:t,size:n,getNeighbor:r}){const i=r?+r(-1,0):0,a=r?+r(1,0):0,w=r?+r(0,-1):0,p=r?+r(0,1):0,_=i+a+w+p;if(_!==0)if(_>2||i&&a||w&&p)this._basicSquare({x:e,y:t,size:n,rotation:0});else{if(_===2){let m=0;return i&&w?m=Math.PI/2:w&&a?m=Math.PI:a&&p&&(m=-Math.PI/2),void this._basicCornerRounded({x:e,y:t,size:n,rotation:m})}if(_===1){let m=0;return w?m=Math.PI/2:a?m=Math.PI:p&&(m=-Math.PI/2),void this._basicSideRounded({x:e,y:t,size:n,rotation:m})}}else this._basicDot({x:e,y:t,size:n,rotation:0})}_drawExtraRounded({x:e,y:t,size:n,getNeighbor:r}){const i=r?+r(-1,0):0,a=r?+r(1,0):0,w=r?+r(0,-1):0,p=r?+r(0,1):0,_=i+a+w+p;if(_!==0)if(_>2||i&&a||w&&p)this._basicSquare({x:e,y:t,size:n,rotation:0});else{if(_===2){let m=0;return i&&w?m=Math.PI/2:w&&a?m=Math.PI:a&&p&&(m=-Math.PI/2),void this._basicCornerExtraRounded({x:e,y:t,size:n,rotation:m})}if(_===1){let m=0;return w?m=Math.PI/2:a?m=Math.PI:p&&(m=-Math.PI/2),void this._basicSideRounded({x:e,y:t,size:n,rotation:m})}}else this._basicDot({x:e,y:t,size:n,rotation:0})}_drawClassy({x:e,y:t,size:n,getNeighbor:r}){const i=r?+r(-1,0):0,a=r?+r(1,0):0,w=r?+r(0,-1):0,p=r?+r(0,1):0;i+a+w+p!==0?i||w?a||p?this._basicSquare({x:e,y:t,size:n,rotation:0}):this._basicCornerRounded({x:e,y:t,size:n,rotation:Math.PI/2}):this._basicCornerRounded({x:e,y:t,size:n,rotation:-Math.PI/2}):this._basicCornersRounded({x:e,y:t,size:n,rotation:Math.PI/2})}_drawClassyRounded({x:e,y:t,size:n,getNeighbor:r}){const i=r?+r(-1,0):0,a=r?+r(1,0):0,w=r?+r(0,-1):0,p=r?+r(0,1):0;i+a+w+p!==0?i||w?a||p?this._basicSquare({x:e,y:t,size:n,rotation:0}):this._basicCornerExtraRounded({x:e,y:t,size:n,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:e,y:t,size:n,rotation:-Math.PI/2}):this._basicCornersRounded({x:e,y:t,size:n,rotation:Math.PI/2})}}const U={dot:"dot",square:"square",extraRounded:"extra-rounded"},Z=Object.values(U);class X{constructor({svg:e,type:t,window:n}){this._svg=e,this._type=t,this._window=n}draw(e,t,n,r){let i;switch(this._type){case U.square:i=this._drawSquare;break;case U.extraRounded:i=this._drawExtraRounded;break;default:i=this._drawDot}i.call(this,{x:e,y:t,size:n,rotation:r})}_rotateFigure({x:e,y:t,size:n,rotation:r=0,draw:i}){var a;const w=e+n/2,p=t+n/2;i(),(a=this._element)===null||a===void 0||a.setAttribute("transform",`rotate(${180*r/Math.PI},${w},${p})`)}_basicDot(e){const{size:t,x:n,y:r}=e,i=t/7;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${n+t/2} ${r}a ${t/2} ${t/2} 0 1 0 0.1 0zm 0 ${i}a ${t/2-i} ${t/2-i} 0 1 1 -0.1 0Z`)}}))}_basicSquare(e){const{size:t,x:n,y:r}=e,i=t/7;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${n} ${r}v ${t}h ${t}v `+-t+`zM ${n+i} ${r+i}h `+(t-2*i)+"v "+(t-2*i)+"h "+(2*i-t)+"z")}}))}_basicExtraRounded(e){const{size:t,x:n,y:r}=e,i=t/7;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${n} ${r+2.5*i}v `+2*i+`a ${2.5*i} ${2.5*i}, 0, 0, 0, ${2.5*i} ${2.5*i}h `+2*i+`a ${2.5*i} ${2.5*i}, 0, 0, 0, ${2.5*i} ${2.5*-i}v `+-2*i+`a ${2.5*i} ${2.5*i}, 0, 0, 0, ${2.5*-i} ${2.5*-i}h `+-2*i+`a ${2.5*i} ${2.5*i}, 0, 0, 0, ${2.5*-i} ${2.5*i}M ${n+2.5*i} ${r+i}h `+2*i+`a ${1.5*i} ${1.5*i}, 0, 0, 1, ${1.5*i} ${1.5*i}v `+2*i+`a ${1.5*i} ${1.5*i}, 0, 0, 1, ${1.5*-i} ${1.5*i}h `+-2*i+`a ${1.5*i} ${1.5*i}, 0, 0, 1, ${1.5*-i} ${1.5*-i}v `+-2*i+`a ${1.5*i} ${1.5*i}, 0, 0, 1, ${1.5*i} ${1.5*-i}`)}}))}_drawDot({x:e,y:t,size:n,rotation:r}){this._basicDot({x:e,y:t,size:n,rotation:r})}_drawSquare({x:e,y:t,size:n,rotation:r}){this._basicSquare({x:e,y:t,size:n,rotation:r})}_drawExtraRounded({x:e,y:t,size:n,rotation:r}){this._basicExtraRounded({x:e,y:t,size:n,rotation:r})}}const T={dot:"dot",square:"square"},P=Object.values(T);class nt{constructor({svg:e,type:t,window:n}){this._svg=e,this._type=t,this._window=n}draw(e,t,n,r){let i;i=this._type===T.square?this._drawSquare:this._drawDot,i.call(this,{x:e,y:t,size:n,rotation:r})}_rotateFigure({x:e,y:t,size:n,rotation:r=0,draw:i}){var a;const w=e+n/2,p=t+n/2;i(),(a=this._element)===null||a===void 0||a.setAttribute("transform",`rotate(${180*r/Math.PI},${w},${p})`)}_basicDot(e){const{size:t,x:n,y:r}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",String(n+t/2)),this._element.setAttribute("cy",String(r+t/2)),this._element.setAttribute("r",String(t/2))}}))}_basicSquare(e){const{size:t,x:n,y:r}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",String(n)),this._element.setAttribute("y",String(r)),this._element.setAttribute("width",String(t)),this._element.setAttribute("height",String(t))}}))}_drawDot({x:e,y:t,size:n,rotation:r}){this._basicDot({x:e,y:t,size:n,rotation:r})}_drawSquare({x:e,y:t,size:n,rotation:r}){this._basicSquare({x:e,y:t,size:n,rotation:r})}}const st="circle",Y=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],G=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];class ht{constructor(e,t){this._roundSize=n=>this._options.dotsOptions.roundSize?Math.floor(n):n,this._window=t,this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",String(e.width)),this._element.setAttribute("height",String(e.height)),this._element.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),e.dotsOptions.roundSize||this._element.setAttribute("shape-rendering","crispEdges"),this._element.setAttribute("viewBox",`0 0 ${e.width} ${e.height}`),this._defs=this._window.document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs),this._imageUri=e.image,this._instanceId=ht.instanceCount++,this._options=e}get width(){return this._options.width}get height(){return this._options.height}getElement(){return this._element}async drawQR(e){const t=e.getModuleCount(),n=Math.min(this._options.width,this._options.height)-2*this._options.margin,r=this._options.shape===st?n/Math.sqrt(2):n,i=this._roundSize(r/t);let a={hideXDots:0,hideYDots:0,width:0,height:0};if(this._qr=e,this._options.image){if(await this.loadImage(),!this._image)return;const{imageOptions:w,qrOptions:p}=this._options,_=w.imageSize*F[p.errorCorrectionLevel],m=Math.floor(_*t*t);a=(function({originalHeight:y,originalWidth:v,maxHiddenDots:x,maxHiddenAxisDots:B,dotSize:O}){const o={x:0,y:0},h={x:0,y:0};if(y<=0||v<=0||x<=0||O<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};const s=y/v;return o.x=Math.floor(Math.sqrt(x/s)),o.x<=0&&(o.x=1),B&&B<o.x&&(o.x=B),o.x%2==0&&o.x--,h.x=o.x*O,o.y=1+2*Math.ceil((o.x*s-1)/2),h.y=Math.round(h.x*s),(o.y*o.x>x||B&&B<o.y)&&(B&&B<o.y?(o.y=B,o.y%2==0&&o.x--):o.y-=2,h.y=o.y*O,o.x=1+2*Math.ceil((o.y/s-1)/2),h.x=Math.round(h.y/s)),{height:h.y,width:h.x,hideYDots:o.y,hideXDots:o.x}})({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:m,maxHiddenAxisDots:t-14,dotSize:i})}this.drawBackground(),this.drawDots(((w,p)=>{var _,m,y,v,x,B;return!(this._options.imageOptions.hideBackgroundDots&&w>=(t-a.hideYDots)/2&&w<(t+a.hideYDots)/2&&p>=(t-a.hideXDots)/2&&p<(t+a.hideXDots)/2||!((_=Y[w])===null||_===void 0)&&_[p]||!((m=Y[w-t+7])===null||m===void 0)&&m[p]||!((y=Y[w])===null||y===void 0)&&y[p-t+7]||!((v=G[w])===null||v===void 0)&&v[p]||!((x=G[w-t+7])===null||x===void 0)&&x[p]||!((B=G[w])===null||B===void 0)&&B[p-t+7])})),this.drawCorners(),this._options.image&&await this.drawImage({width:a.width,height:a.height,count:t,dotSize:i})}drawBackground(){var e,t,n;const r=this._element,i=this._options;if(r){const a=(e=i.backgroundOptions)===null||e===void 0?void 0:e.gradient,w=(t=i.backgroundOptions)===null||t===void 0?void 0:t.color;let p=i.height,_=i.width;if(a||w){const m=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect");this._backgroundClipPath=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._backgroundClipPath.setAttribute("id",`clip-path-background-color-${this._instanceId}`),this._defs.appendChild(this._backgroundClipPath),!((n=i.backgroundOptions)===null||n===void 0)&&n.round&&(p=_=Math.min(i.width,i.height),m.setAttribute("rx",String(p/2*i.backgroundOptions.round))),m.setAttribute("x",String(this._roundSize((i.width-_)/2))),m.setAttribute("y",String(this._roundSize((i.height-p)/2))),m.setAttribute("width",String(_)),m.setAttribute("height",String(p)),this._backgroundClipPath.appendChild(m),this._createColor({options:a,color:w,additionalRotation:0,x:0,y:0,height:i.height,width:i.width,name:`background-color-${this._instanceId}`})}}}drawDots(e){var t,n;if(!this._qr)throw"QR code is not defined";const r=this._options,i=this._qr.getModuleCount();if(i>r.width||i>r.height)throw"The canvas is too small.";const a=Math.min(r.width,r.height)-2*r.margin,w=r.shape===st?a/Math.sqrt(2):a,p=this._roundSize(w/i),_=this._roundSize((r.width-i*p)/2),m=this._roundSize((r.height-i*p)/2),y=new N({svg:this._element,type:r.dotsOptions.type,window:this._window});this._dotsClipPath=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._dotsClipPath.setAttribute("id",`clip-path-dot-color-${this._instanceId}`),this._defs.appendChild(this._dotsClipPath),this._createColor({options:(t=r.dotsOptions)===null||t===void 0?void 0:t.gradient,color:r.dotsOptions.color,additionalRotation:0,x:0,y:0,height:r.height,width:r.width,name:`dot-color-${this._instanceId}`});for(let v=0;v<i;v++)for(let x=0;x<i;x++)e&&!e(v,x)||!((n=this._qr)===null||n===void 0)&&n.isDark(v,x)&&(y.draw(_+x*p,m+v*p,p,((B,O)=>!(x+B<0||v+O<0||x+B>=i||v+O>=i)&&!(e&&!e(v+O,x+B))&&!!this._qr&&this._qr.isDark(v+O,x+B))),y._element&&this._dotsClipPath&&this._dotsClipPath.appendChild(y._element));if(r.shape===st){const v=this._roundSize((a/p-i)/2),x=i+2*v,B=_-v*p,O=m-v*p,o=[],h=this._roundSize(x/2);for(let s=0;s<x;s++){o[s]=[];for(let u=0;u<x;u++)s>=v-1&&s<=x-v&&u>=v-1&&u<=x-v||Math.sqrt((s-h)*(s-h)+(u-h)*(u-h))>h?o[s][u]=0:o[s][u]=this._qr.isDark(u-2*v<0?u:u>=i?u-2*v:u-v,s-2*v<0?s:s>=i?s-2*v:s-v)?1:0}for(let s=0;s<x;s++)for(let u=0;u<x;u++)o[s][u]&&(y.draw(B+u*p,O+s*p,p,((g,b)=>{var $;return!!(!(($=o[s+b])===null||$===void 0)&&$[u+g])})),y._element&&this._dotsClipPath&&this._dotsClipPath.appendChild(y._element))}}drawCorners(){if(!this._qr)throw"QR code is not defined";const e=this._element,t=this._options;if(!e)throw"Element code is not defined";const n=this._qr.getModuleCount(),r=Math.min(t.width,t.height)-2*t.margin,i=t.shape===st?r/Math.sqrt(2):r,a=this._roundSize(i/n),w=7*a,p=3*a,_=this._roundSize((t.width-n*a)/2),m=this._roundSize((t.height-n*a)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach((([y,v,x])=>{var B,O,o,h,s,u,g,b,$,I,q,L,H,et;const V=_+y*a*(n-7),W=m+v*a*(n-7);let j=this._dotsClipPath,M=this._dotsClipPath;if((!((B=t.cornersSquareOptions)===null||B===void 0)&&B.gradient||!((O=t.cornersSquareOptions)===null||O===void 0)&&O.color)&&(j=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),j.setAttribute("id",`clip-path-corners-square-color-${y}-${v}-${this._instanceId}`),this._defs.appendChild(j),this._cornersSquareClipPath=this._cornersDotClipPath=M=j,this._createColor({options:(o=t.cornersSquareOptions)===null||o===void 0?void 0:o.gradient,color:(h=t.cornersSquareOptions)===null||h===void 0?void 0:h.color,additionalRotation:x,x:V,y:W,height:w,width:w,name:`corners-square-color-${y}-${v}-${this._instanceId}`})),((s=t.cornersSquareOptions)===null||s===void 0?void 0:s.type)&&Z.includes(t.cornersSquareOptions.type)){const K=new X({svg:this._element,type:t.cornersSquareOptions.type,window:this._window});K.draw(V,W,w,x),K._element&&j&&j.appendChild(K._element)}else{const K=new N({svg:this._element,type:((u=t.cornersSquareOptions)===null||u===void 0?void 0:u.type)||t.dotsOptions.type,window:this._window});for(let J=0;J<Y.length;J++)for(let E=0;E<Y[J].length;E++)!((g=Y[J])===null||g===void 0)&&g[E]&&(K.draw(V+E*a,W+J*a,a,((ot,rt)=>{var it;return!!(!((it=Y[J+rt])===null||it===void 0)&&it[E+ot])})),K._element&&j&&j.appendChild(K._element))}if((!((b=t.cornersDotOptions)===null||b===void 0)&&b.gradient||!(($=t.cornersDotOptions)===null||$===void 0)&&$.color)&&(M=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),M.setAttribute("id",`clip-path-corners-dot-color-${y}-${v}-${this._instanceId}`),this._defs.appendChild(M),this._cornersDotClipPath=M,this._createColor({options:(I=t.cornersDotOptions)===null||I===void 0?void 0:I.gradient,color:(q=t.cornersDotOptions)===null||q===void 0?void 0:q.color,additionalRotation:x,x:V+2*a,y:W+2*a,height:p,width:p,name:`corners-dot-color-${y}-${v}-${this._instanceId}`})),((L=t.cornersDotOptions)===null||L===void 0?void 0:L.type)&&P.includes(t.cornersDotOptions.type)){const K=new nt({svg:this._element,type:t.cornersDotOptions.type,window:this._window});K.draw(V+2*a,W+2*a,p,x),K._element&&M&&M.appendChild(K._element)}else{const K=new N({svg:this._element,type:((H=t.cornersDotOptions)===null||H===void 0?void 0:H.type)||t.dotsOptions.type,window:this._window});for(let J=0;J<G.length;J++)for(let E=0;E<G[J].length;E++)!((et=G[J])===null||et===void 0)&&et[E]&&(K.draw(V+E*a,W+J*a,a,((ot,rt)=>{var it;return!!(!((it=G[J+rt])===null||it===void 0)&&it[E+ot])})),K._element&&M&&M.appendChild(K._element))}}))}loadImage(){return new Promise(((e,t)=>{var n;const r=this._options;if(!r.image)return t("Image is not defined");if(!((n=r.nodeCanvas)===null||n===void 0)&&n.loadImage)r.nodeCanvas.loadImage(r.image).then((i=>{var a,w;if(this._image=i,this._options.imageOptions.saveAsBlob){const p=(a=r.nodeCanvas)===null||a===void 0?void 0:a.createCanvas(this._image.width,this._image.height);(w=p==null?void 0:p.getContext("2d"))===null||w===void 0||w.drawImage(i,0,0),this._imageUri=p==null?void 0:p.toDataURL()}e()})).catch(t);else{const i=new this._window.Image;typeof r.imageOptions.crossOrigin=="string"&&(i.crossOrigin=r.imageOptions.crossOrigin),this._image=i,i.onload=async()=>{this._options.imageOptions.saveAsBlob&&(this._imageUri=await(async function(a,w){return new Promise((p=>{const _=new w.XMLHttpRequest;_.onload=function(){const m=new w.FileReader;m.onloadend=function(){p(m.result)},m.readAsDataURL(_.response)},_.open("GET",a),_.responseType="blob",_.send()}))})(r.image||"",this._window)),e()},i.src=r.image}}))}async drawImage({width:e,height:t,count:n,dotSize:r}){const i=this._options,a=this._roundSize((i.width-n*r)/2),w=this._roundSize((i.height-n*r)/2),p=a+this._roundSize(i.imageOptions.margin+(n*r-e)/2),_=w+this._roundSize(i.imageOptions.margin+(n*r-t)/2),m=e-2*i.imageOptions.margin,y=t-2*i.imageOptions.margin,v=this._window.document.createElementNS("http://www.w3.org/2000/svg","image");v.setAttribute("href",this._imageUri||""),v.setAttribute("xlink:href",this._imageUri||""),v.setAttribute("x",String(p)),v.setAttribute("y",String(_)),v.setAttribute("width",`${m}px`),v.setAttribute("height",`${y}px`),this._element.appendChild(v)}_createColor({options:e,color:t,additionalRotation:n,x:r,y:i,height:a,width:w,name:p}){const _=w>a?w:a,m=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect");if(m.setAttribute("x",String(r)),m.setAttribute("y",String(i)),m.setAttribute("height",String(a)),m.setAttribute("width",String(w)),m.setAttribute("clip-path",`url('#clip-path-${p}')`),e){let y;if(e.type==="radial")y=this._window.document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),y.setAttribute("id",p),y.setAttribute("gradientUnits","userSpaceOnUse"),y.setAttribute("fx",String(r+w/2)),y.setAttribute("fy",String(i+a/2)),y.setAttribute("cx",String(r+w/2)),y.setAttribute("cy",String(i+a/2)),y.setAttribute("r",String(_/2));else{const v=((e.rotation||0)+n)%(2*Math.PI),x=(v+2*Math.PI)%(2*Math.PI);let B=r+w/2,O=i+a/2,o=r+w/2,h=i+a/2;x>=0&&x<=.25*Math.PI||x>1.75*Math.PI&&x<=2*Math.PI?(B-=w/2,O-=a/2*Math.tan(v),o+=w/2,h+=a/2*Math.tan(v)):x>.25*Math.PI&&x<=.75*Math.PI?(O-=a/2,B-=w/2/Math.tan(v),h+=a/2,o+=w/2/Math.tan(v)):x>.75*Math.PI&&x<=1.25*Math.PI?(B+=w/2,O+=a/2*Math.tan(v),o-=w/2,h-=a/2*Math.tan(v)):x>1.25*Math.PI&&x<=1.75*Math.PI&&(O+=a/2,B+=w/2/Math.tan(v),h-=a/2,o-=w/2/Math.tan(v)),y=this._window.document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),y.setAttribute("id",p),y.setAttribute("gradientUnits","userSpaceOnUse"),y.setAttribute("x1",String(Math.round(B))),y.setAttribute("y1",String(Math.round(O))),y.setAttribute("x2",String(Math.round(o))),y.setAttribute("y2",String(Math.round(h)))}e.colorStops.forEach((({offset:v,color:x})=>{const B=this._window.document.createElementNS("http://www.w3.org/2000/svg","stop");B.setAttribute("offset",100*v+"%"),B.setAttribute("stop-color",x),y.appendChild(B)})),m.setAttribute("fill",`url('#${p}')`),this._defs.appendChild(y)}else t&&m.setAttribute("fill",t);this._element.appendChild(m)}}ht.instanceCount=0;const _t=ht,ct="canvas",yt={};for(let d=0;d<=40;d++)yt[d]=d;const bt={type:ct,shape:"square",width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:yt[0],mode:void 0,errorCorrectionLevel:"Q"},imageOptions:{saveAsBlob:!0,hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0},dotsOptions:{type:"square",color:"#000",roundSize:!0},backgroundOptions:{round:0,color:"#fff"}};function lt(d){const e=Object.assign({},d);if(!e.colorStops||!e.colorStops.length)throw"Field 'colorStops' is required in gradient";return e.rotation?e.rotation=Number(e.rotation):e.rotation=0,e.colorStops=e.colorStops.map((t=>Object.assign(Object.assign({},t),{offset:Number(t.offset)}))),e}function Ct(d){const e=Object.assign({},d);return e.width=Number(e.width),e.height=Number(e.height),e.margin=Number(e.margin),e.imageOptions=Object.assign(Object.assign({},e.imageOptions),{hideBackgroundDots:!!e.imageOptions.hideBackgroundDots,imageSize:Number(e.imageOptions.imageSize),margin:Number(e.imageOptions.margin)}),e.margin>Math.min(e.width,e.height)&&(e.margin=Math.min(e.width,e.height)),e.dotsOptions=Object.assign({},e.dotsOptions),e.dotsOptions.gradient&&(e.dotsOptions.gradient=lt(e.dotsOptions.gradient)),e.cornersSquareOptions&&(e.cornersSquareOptions=Object.assign({},e.cornersSquareOptions),e.cornersSquareOptions.gradient&&(e.cornersSquareOptions.gradient=lt(e.cornersSquareOptions.gradient))),e.cornersDotOptions&&(e.cornersDotOptions=Object.assign({},e.cornersDotOptions),e.cornersDotOptions.gradient&&(e.cornersDotOptions.gradient=lt(e.cornersDotOptions.gradient))),e.backgroundOptions&&(e.backgroundOptions=Object.assign({},e.backgroundOptions),e.backgroundOptions.gradient&&(e.backgroundOptions.gradient=lt(e.backgroundOptions.gradient))),e}var xt=k(873),At=k.n(xt);function gt(d){if(!d)throw new Error("Extension must be defined");d[0]==="."&&(d=d.substring(1));const e={bmp:"image/bmp",gif:"image/gif",ico:"image/vnd.microsoft.icon",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",tif:"image/tiff",tiff:"image/tiff",webp:"image/webp",pdf:"application/pdf"}[d.toLowerCase()];if(!e)throw new Error(`Extension "${d}" is not supported`);return e}class f{constructor(e){e!=null&&e.jsdom?this._window=new e.jsdom("",{resources:"usable"}).window:this._window=window,this._options=e?Ct(C(bt,e)):bt,this.update()}static _clearContainer(e){e&&(e.innerHTML="")}_setupSvg(){if(!this._qr)return;const e=new _t(this._options,this._window);this._svg=e.getElement(),this._svgDrawingPromise=e.drawQR(this._qr).then((()=>{var t;this._svg&&((t=this._extension)===null||t===void 0||t.call(this,e.getElement(),this._options))}))}_setupCanvas(){var e,t;this._qr&&(!((e=this._options.nodeCanvas)===null||e===void 0)&&e.createCanvas?(this._nodeCanvas=this._options.nodeCanvas.createCanvas(this._options.width,this._options.height),this._nodeCanvas.width=this._options.width,this._nodeCanvas.height=this._options.height):(this._domCanvas=document.createElement("canvas"),this._domCanvas.width=this._options.width,this._domCanvas.height=this._options.height),this._setupSvg(),this._canvasDrawingPromise=(t=this._svgDrawingPromise)===null||t===void 0?void 0:t.then((()=>{var n;if(!this._svg)return;const r=this._svg,i=new this._window.XMLSerializer().serializeToString(r),a=btoa(i),w=`data:${gt("svg")};base64,${a}`;if(!((n=this._options.nodeCanvas)===null||n===void 0)&&n.loadImage)return this._options.nodeCanvas.loadImage(w).then((p=>{var _,m;p.width=this._options.width,p.height=this._options.height,(m=(_=this._nodeCanvas)===null||_===void 0?void 0:_.getContext("2d"))===null||m===void 0||m.drawImage(p,0,0)}));{const p=new this._window.Image;return new Promise((_=>{p.onload=()=>{var m,y;(y=(m=this._domCanvas)===null||m===void 0?void 0:m.getContext("2d"))===null||y===void 0||y.drawImage(p,0,0),_()},p.src=w}))}})))}async _getElement(e="png"){if(!this._qr)throw"QR code is empty";return e.toLowerCase()==="svg"?(this._svg&&this._svgDrawingPromise||this._setupSvg(),await this._svgDrawingPromise,this._svg):((this._domCanvas||this._nodeCanvas)&&this._canvasDrawingPromise||this._setupCanvas(),await this._canvasDrawingPromise,this._domCanvas||this._nodeCanvas)}update(e){f._clearContainer(this._container),this._options=e?Ct(C(this._options,e)):this._options,this._options.data&&(this._qr=At()(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||(function(t){switch(!0){case/^[0-9]*$/.test(t):return"Numeric";case/^[0-9A-Z $%*+\-./:]*$/.test(t):return"Alphanumeric";default:return"Byte"}})(this._options.data)),this._qr.make(),this._options.type===ct?this._setupCanvas():this._setupSvg(),this.append(this._container))}append(e){if(e){if(typeof e.appendChild!="function")throw"Container should be a single DOM node";this._options.type===ct?this._domCanvas&&e.appendChild(this._domCanvas):this._svg&&e.appendChild(this._svg),this._container=e}}applyExtension(e){if(!e)throw"Extension function should be defined.";this._extension=e,this.update()}deleteExtension(){this._extension=void 0,this.update()}async getRawData(e="png"){if(!this._qr)throw"QR code is empty";const t=await this._getElement(e),n=gt(e);if(!t)return null;if(e.toLowerCase()==="svg"){const r=`<?xml version="1.0" standalone="no"?>\r
${new this._window.XMLSerializer().serializeToString(t)}`;return typeof Blob>"u"||this._options.jsdom?Buffer.from(r):new Blob([r],{type:n})}return new Promise((r=>{const i=t;if("toBuffer"in i)if(n==="image/png")r(i.toBuffer(n));else if(n==="image/jpeg")r(i.toBuffer(n));else{if(n!=="application/pdf")throw Error("Unsupported extension");r(i.toBuffer(n))}else"toBlob"in i&&i.toBlob(r,n,1)}))}async download(e){if(!this._qr)throw"QR code is empty";if(typeof Blob>"u")throw"Cannot download in Node.js, call getRawData instead.";let t="png",n="qr";typeof e=="string"?(t=e,console.warn("Extension is deprecated as argument for 'download' method, please pass object { name: '...', extension: '...' } as argument")):typeof e=="object"&&e!==null&&(e.name&&(n=e.name),e.extension&&(t=e.extension));const r=await this._getElement(t);if(r)if(t.toLowerCase()==="svg"){let i=new XMLSerializer().serializeToString(r);i=`<?xml version="1.0" standalone="no"?>\r
`+i,D(`data:${gt(t)};charset=utf-8,${encodeURIComponent(i)}`,`${n}.svg`)}else D(r.toDataURL(gt(t)),`${n}.${t}`)}}const l=f})(),Q.default})()))})(vt)),vt.exports}var Ut=Ft();const Qt=Lt(Ut),Ht="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4BAMAAABaqCYtAAAAMFBMVEUKfmT+//8Bd1tSpJAginI7l4OgzcNxl0BjrZyQxbl6uas6ilTr9fOz18/R5+KbojH3wCiYAAAACXBIWXMAAAsTAAALEwEAmpwYAAABYklEQVR42mNgGKZACY+UggsTTqmIaWkZOGQjpmWZMHilKjCwBmHIuWWZKCkwKIVNUVJdhC7HNAMoBTLcdmnnBQydE0AyQAUKna2TFdB1TlVQUnBdZQQ0WSkSQzI2JGJazuJpDkA2pwO6sapps0yslJRTgEwtIwwXKSgpdSiAvak6CZtX3SBBoDQFm6TyVQVQSAU/VsAiyQQMAmAgZnVik+QusF0xbVaIkhY2Y+u3K3SFKClgDXrucu4CHFJAye8bCnBGNnt1QTVOye3/8Uiy19fjMXb79g04Jbm/45ZkUir/jlPONTTYBEg7YJNkEwSCJgaWd9g0JoIkLzHoCmKmTAYtkJxgEtNCLJIuNkCpM2eMlAVlMeRUzwDl5FwclHwEj2AEvTLITKAelouCRgxYJQXPvXsjKKmAQxIELjDglpRxwiMprIBHchEDbklZrMFubGxs0dHRYYC9RIAABYZRQAoAAMPFUF7XIspMAAAAAElFTkSuQmCC";function ut(c,A){Object.entries(A).forEach(([z,R])=>{c.style[z]=R})}function It(c){if(c.startsWith("#"))return c;if(c.startsWith("rgb")){const A=c.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);if(A){const z=parseInt(A[1]).toString(16).padStart(2,"0"),R=parseInt(A[2]).toString(16).padStart(2,"0"),k=parseInt(A[3]).toString(16).padStart(2,"0");return`#${z}${R}${k}`}}if(c.startsWith("hsl")){const A=c.match(/hsla?\((\d+),\s*(\d+)%,\s*(\d+)%/);if(A){const z=parseInt(A[1])/360,R=parseInt(A[2])/100,k=parseInt(A[3])/100;let Q,S,C;if(R===0)Q=S=C=k;else{const F=(Z,X,T)=>(T<0&&(T+=1),T>1&&(T-=1),T<.16666666666666666?Z+(X-Z)*6*T:T<.5?X:T<.6666666666666666?Z+(X-Z)*(.6666666666666666-T)*6:Z),N=k<.5?k*(1+R):k+R-k*R,U=2*k-N;Q=F(U,N,z+1/3),S=F(U,N,z),C=F(U,N,z-1/3)}const D=F=>Math.round(F*255).toString(16).padStart(2,"0");return`#${D(Q)}${D(S)}${D(C)}`}}return c}function Wt(c,A,z){const R=document.createElement("div");R.className="drop-payment-link",ut(R,{marginTop:"16px",width:`${A}px`});const k=document.createElement("label");k.className="drop-link-label",k.textContent=z,ut(k,{display:"block",fontSize:"14px",fontWeight:"500",color:"hsl(160, 65%, 25%)",marginBottom:"8px",fontFamily:"system-ui, -apple-system, sans-serif"});const Q=document.createElement("div");Q.className="drop-link-input-wrapper",ut(Q,{position:"relative"});const S=document.createElement("input");S.type="text",S.readOnly=!0,S.value=c,S.className="drop-link-input",S.setAttribute("aria-label","Payment link");const C=document.createElement("p");C.className="drop-link-hint",C.textContent="Tap to copy",ut(C,{fontSize:"12px",color:"hsl(160, 30%, 40%)",marginTop:"6px",marginBottom:"0",fontFamily:"system-ui, -apple-system, sans-serif"});const D=async()=>{S.select();try{navigator.clipboard&&navigator.clipboard.writeText?(await navigator.clipboard.writeText(c),F()):document.execCommand("copy")&&F()}catch{document.execCommand("copy"),F()}},F=()=>{const N=C.textContent;C.textContent="✓ Copied to clipboard!",ut(C,{color:"hsl(160, 65%, 35%)",fontWeight:"500"}),setTimeout(()=>{C.textContent=N,ut(C,{color:"hsl(160, 30%, 40%)",fontWeight:"normal"})},2e3)};return S.addEventListener("click",D),S.addEventListener("keydown",N=>{(N.key==="Enter"||N.key===" ")&&(N.preventDefault(),D())}),ut(S,{width:"100%",padding:"12px",fontSize:"14px",fontFamily:"monospace",border:"2px solid hsl(160, 65%, 25%)",borderRadius:"8px",backgroundColor:"hsl(0, 0%, 98%)",color:"hsl(160, 65%, 25%)",boxSizing:"border-box",cursor:"pointer",outline:"none"}),S.addEventListener("focus",()=>{ut(S,{borderColor:"hsl(160, 65%, 35%)",backgroundColor:"hsl(160, 80%, 98%)"})}),S.addEventListener("blur",()=>{ut(S,{borderColor:"hsl(160, 65%, 25%)",backgroundColor:"hsl(0, 0%, 98%)"})}),Q.appendChild(S),R.appendChild(k),R.appendChild(Q),R.appendChild(C),R}async function kt(c,A,z,R={}){const{moduleColor:k="hsl(160, 65%, 25%)",backgroundColor:Q="hsl(0, 0%, 98%)",cornerRadius:S=0,showCopyableLink:C=!0,linkText:D="Or paste this link:"}=R,F=It(k),N=It(Q),U=Math.sqrt(.18),Z=Math.round(z*.03),X=new Qt({width:z,height:z,type:"svg",data:A,image:Ht,qrOptions:{errorCorrectionLevel:"H"},dotsOptions:{color:F,type:S>0?"rounded":"square"},backgroundOptions:{color:N},imageOptions:{hideBackgroundDots:!0,imageSize:U,margin:Z}}),T=document.createElement("div");T.className="drop-payment-widget",X.append(T);const P=T.querySelector("svg");if(P&&(P.setAttribute("role","img"),P.setAttribute("aria-label","Payment QR Code")),C){const nt=Wt(A,z,D);T.appendChild(nt)}c.innerHTML="",c.appendChild(T)}class tt extends Error{constructor(A){super(A),this.name="ValidationError"}}function Kt(c){Vt(c.clientSecret),c.qrSize!==void 0&&Xt(c.qrSize),c.pollingInterval!==void 0&&Yt(c.pollingInterval),c.qrOptions&&Gt(c.qrOptions),c.linkText!==void 0&&Zt(c.linkText),te(c)}function Vt(c){if(!c||c.trim()==="")throw new tt("clientSecret is required and cannot be empty");if(c.length<10)throw new tt(`clientSecret must be at least 10 characters long. Received length: ${c.length}`);if(!c.startsWith("pi_secret_"))throw new tt("clientSecret must start with 'pi_secret_'. Received: "+c.substring(0,10)+"...")}function Xt(c){if(typeof c!="number"||isNaN(c)||!isFinite(c))throw new tt(`qrSize must be a valid number. Received: ${c}`);if(c<128||c>1024)throw new tt(`QR size must be between 128 and 1024 pixels. Received: ${c}`)}function Yt(c){if(typeof c!="number"||isNaN(c)||!isFinite(c))throw new tt(`pollingInterval must be a valid number. Received: ${c}`);if(c<1e3||c>6e4)throw new tt(`pollingInterval must be between 1000 and 60000 milliseconds. Received: ${c}`)}function Gt(c){c&&(c.cornerRadius!==void 0&&Jt(c.cornerRadius),c.moduleColor!==void 0&&Dt(c.moduleColor,"moduleColor"),c.backgroundColor!==void 0&&Dt(c.backgroundColor,"backgroundColor"))}function Jt(c){if(typeof c!="number"||isNaN(c)||!isFinite(c))throw new tt(`cornerRadius must be a valid number. Received: ${c}`);if(c<0||c>1)throw new tt(`cornerRadius must be between 0 and 1. Received: ${c}`)}function Dt(c,A){if(typeof c!="string")throw new tt(`${A} must be a string. Received: ${typeof c}`);const z=/^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$/,R=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/,k=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(0|1|0?\.\d+)\s*\)$/,Q=/^hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/,S=/^hsla\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*,\s*(0|1|0?\.\d+)\s*\)$/;let C=z.test(c);if(!C){const D=c.match(R);if(D){const[,F,N,U]=D;C=parseInt(F)<=255&&parseInt(N)<=255&&parseInt(U)<=255}}if(!C){const D=c.match(k);if(D){const[,F,N,U]=D;C=parseInt(F)<=255&&parseInt(N)<=255&&parseInt(U)<=255}}if(!C){const D=c.match(Q);if(D){const[,F,N,U]=D;C=parseInt(F)<=360&&parseInt(N)<=100&&parseInt(U)<=100}}if(!C){const D=c.match(S);if(D){const[,F,N,U]=D;C=parseInt(F)<=360&&parseInt(N)<=100&&parseInt(U)<=100}}if(!C)throw new tt(`${A} must be a valid color format (hex, rgb, rgba, hsl, or hsla). Received: ${c}`)}function Zt(c){if(typeof c!="string")throw new tt(`linkText must be a string. Received: ${typeof c}`);if(c.length>100)throw new tt(`linkText must be 100 characters or less. Received length: ${c.length}`)}function te(c){if(c.onStatusChange!==void 0&&typeof c.onStatusChange!="function")throw new tt(`onStatusChange must be a function if provided. Received: ${typeof c.onStatusChange}`);if(c.onError!==void 0&&typeof c.onError!="function")throw new tt(`onError must be a function if provided. Received: ${typeof c.onError}`);if(c.onPoll!==void 0&&typeof c.onPoll!="function")throw new tt(`onPoll must be a function if provided. Received: ${typeof c.onPoll}`)}const ee={INITIATED:"initiated",PENDING:"pending",SUCCEEDED:"succeeded",FAILED:"failed",CANCELLED:"cancelled",EXPIRED:"expired"},ie={NETWORK_ERROR:"NETWORK_ERROR",AUTH_ERROR:"AUTH_ERROR",RATE_LIMITED:"RATE_LIMITED",NOT_FOUND:"NOT_FOUND",VALIDATION_ERROR:"VALIDATION_ERROR",UNKNOWN:"UNKNOWN"},ne=256;function re(c){const A=c.split("?")[0].split("#")[0],z=c.includes("?")?c.substring(c.indexOf("?")):"",R=/\/payment-accounts\/([^/]+)\/payment-intents\/([^/]+)/,k=A.match(R);if(!k)throw new Error("Invalid instanceUrl format. Expected: .../payment-accounts/{id}/payment-intents/{id}");const Q=k[1],S=k[2],C=A.substring(0,A.indexOf("/payment-accounts/"));return{paymentAccountId:Q,paymentIntentId:S,apiBaseUrl:C,queryString:z}}const oe={async create(c){Kt(c);const{clientSecret:A,instanceUrl:z,containerId:R,qrSize:k=ne,pollingInterval:Q,onStatusChange:S,onError:C,onPoll:D}=c,F=document.getElementById(R);if(!F)throw new Error(`Element with id "${R}" not found.`);const{paymentAccountId:N,paymentIntentId:U,apiBaseUrl:Z,queryString:X}=re(z),T=c.apiBaseUrl||Z,{qrOptions:P,showCopyableLink:nt,linkText:st}=c;await kt(F,z,k,{...P,showCopyableLink:nt,linkText:st});const Y=new qt({apiBaseUrl:T,paymentAccountId:N,paymentIntentId:U,clientSecret:A,queryString:X,pollingInterval:Q,onStatusChange:G=>{S==null||S(G)},onError:G=>{C==null||C(G)},onPoll:()=>{D==null||D()}});return Y.start(),{destroy(){Y.stop(),F.innerHTML=""},getStatus(){return Y.getStatus()}}}};dt.Drop=oe,dt.ErrorCodes=ie,dt.PaymentStatuses=ee,dt.ValidationError=tt,dt.renderQR=kt,Object.defineProperty(dt,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=drop.umd.cjs.map
